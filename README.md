# jp-local-gov

`npm install jp-local-gov`

![types included](https://badgen.net/npm/types/tslib)
[![npm version](https://badge.fury.io/js/jp-local-gov.svg)](https://badge.fury.io/js/jp-local-gov)
[![codecov](https://codecov.io/gh/hideo54/jp-local-gov/branch/main/graph/badge.svg?token=7oTGboRMqc)](https://codecov.io/gh/hideo54/jp-local-gov)


## 機能一覧

### 都道府県

#### `prefectureNames: string[]`

「北海道」「東京都」「大阪府」のように、都道府県の名前を、JIS X 0401 で定められている都道府県コードの順番で収録した配列です。

#### `prefectureNamesWithoutSuffix: string[]`

「北海道」「東京」「大阪」のように、通常「北海道」としか呼ばれない北海道以外の都府県について、「都府県」の接尾辞を抜いた都道府県の名前を、JIS X 0401 で定められている都道府県コードの順番で収録した配列です。

### 全国地方公共団体コード

総務省が定めている「[全国地方公共団体コード](https://www.soumu.go.jp/denshijiti/code.html)」のための機能群です。JIS X 0401 で定められている2桁の都道府県コード、JIS X 0402 で定められている3桁の市区町村コードと、検査数字1桁から成ります。

#### `verifyCheckDigit(code): bool`

6桁の全国地方公共団体コードの検査数字が正常かどうかを返す関数です。

#### `getCodeInfo(code): Object`

6桁の全国地方公共団体コードから、その地方公共団体の情報 (コード、名前、読みかな、上位/下位の都道府県/市区町村) を返す関数です。

#### `searchCodeInfo(word): Object`

「沼津市」「東京都北区」などのクエリを引数にとり、データベース (ローカルの JSON ファイル) から一致するものを検索し、その地方公共団体の情報 (コード、名前、読みかな、上位/下位の都道府県/市区町村) を返す関数です。

### 地域メッシュコード

JIS X 0410 で定められている「地域メッシュコード」のための機能群です。業界でみられる様々な非標準拡張にも対応しています。

#### `coordinateToMeshCode(coordinate[, degree]): string`

座標をメッシュコードに変換します。

第1引数には座標を [緯度, 経度] もしくは [経度, 緯度] の形式で与えます。

座標の緯度経度をどの順番で指定するかは大きなサービス間でもはっきりと統一されていません。ISO 6709 では [緯度, 経度] の順と定義されており、Google Maps や JIS X 0410 など、この順番を遵守しているものがやや多い印象ですが、たとえば GeoJSON ([RFC 7841](https://datatracker.ietf.org/doc/html/rfc7946)) では [経度, 緯度] の順で座標を記述します。「地域メッシュコード」は日本国土のみ (北緯24 - 46度、東経122 - 149度範囲) を対象としているため、幸い順番の推測が可能ですから、両方の順番に対応しています。

第2引数には所望のメッシュ種類を指定します。省略した場合、基準地域メッシュコードとなります。

| 引数 | JIS X 0410 での定義 | 1辺のおおよその距離 | よく使われている名称 | 使用されている箇所の例 |
| --- | --- | --- | --- | --- |
| `JIS-1` | 「基準地域メッシュコード」のはじめ4桁の「第1次地域区画を示す数字」 | 80 km | 1次メッシュコード | 国勢調査 |
| `JIS-2` | 「基準地域メッシュコード」のはじめ6桁の「第2次地域区画を示す数字」 | 10 km | 2次メッシュコード | 国勢調査 |
| `JIS-3` | 「基準地域メッシュコード」 (「第3次地域区画を示す数字」) | 1 km | 3次メッシュコード | 国勢調査 |
| `JIS-3-1/2`, `4`, `500m` | 「2分の1地域メッシュコード」(分割地域メッシュコードの1種) | 500 m | 4次メッシュコード | 国勢調査 |
| `JIS-3-1/4`, `5`, `250m` | 「4分の1地域メッシュコード」(分割地域メッシュコードの1種) | 250 m | 5次メッシュコード | 国勢調査 |
| `JIS-3-1/8`, `125m` | 「8分の1地域メッシュコード」(分割地域メッシュコードの1種) | 125 m | | |
| `JIS-3-x10` | 「10倍地域メッシュコード」(統合地域メッシュコードの1種) | 10 km | | |
| `JIS-3-x5` | 「5倍地域メッシュコード」(統合地域メッシュコードの1種) | 5 km | | |
| `JIS-3-x2` | 「2倍地域メッシュコード」(統合地域メッシュコードの1種) | 2 km | | |
| `100m` | なし | 100 m | | [国土数値情報「土地利用細分メッシュデータ」](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-L03-b.html) |
